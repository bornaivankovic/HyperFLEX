<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>data.dbinterfaces &mdash; HyperFLEX Core 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="HyperFLEX Core 0.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">HyperFLEX Core 0.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for data.dbinterfaces</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot; This package handles Data and Database related tasks:</span>

<span class="sd">* Interfaces relation databases using Canonical&#39;s Object Relational Mapper *Storm*</span>
<span class="sd">* Provides interface to store real-time data into database</span>
<span class="sd">* Interface to push data from database to *HyperFLEX GUI*</span>

<span class="sd">For high-level design and Software-Engineering artifacts refer to the</span>
<span class="sd">`Link wiki &lt;https://wiki.lkn.ei.tum.de/intern:lkn:all:students:kalmbach:start&gt;`</span>

<span class="sd">For more information on *Strom* refer to:</span>

<span class="sd">* `Strom Tutorial &lt;https://storm.canonical.com/Tutorial#References_and_subclassing&gt;`_</span>
<span class="sd">* `Strom Manual &lt;https://storm.canonical.com/Manual&gt;`_</span>
<span class="sd">* Explanation on how to use `infoheritance &lt;https://storm.canonical.com/Infoheritance&gt;`_</span>
<span class="sd">  to handle inheritance in RDBMS</span>
<span class="sd">* `API Documentation &lt;https://twistedmatrix.com/users/radix/storm-api/storm.html&gt;`_</span>

<span class="sd">Convention in this module is that evertying *cursive* relates to the database</span>
<span class="sd">schema and everthing ``monospace`` to python code.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">MySQLdb</span> <span class="kn">as</span> <span class="nn">msdb</span>
<span class="kn">import</span> <span class="nn">config</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">storm.locals</span> <span class="kn">as</span> <span class="nn">storm</span>

<div class="viewcode-block" id="IterMixin"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.IterMixin">[docs]</a><span class="k">class</span> <span class="nc">IterMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Base class providing subclasses with ability to return an iterator</span>
<span class="sd">        over their attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="IterMixin.__iter__"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.IterMixin.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Give an iterator over attributes</span>

<span class="sd">            Returns:</span>
<span class="sd">                Iterator</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">itervalues</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span>

</div></div>
<div class="viewcode-block" id="SwitchToVsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.SwitchToVsdn">[docs]</a><span class="k">class</span> <span class="nc">SwitchToVsdn</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM for table *SwitchToVsdn* in database *HyperFlexTopology*</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String defining relation in database</span>
<span class="sd">            id: Integer being primary key of relation</span>
<span class="sd">            switch_id: Integer being foreign key of relation *PhysicalSwitch*</span>
<span class="sd">            vsdn_id: Integer bein foreign key for relation *Vsdn*</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;SwitchToVsdn&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">switch_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inits class</span>

<span class="sd">            Args:</span>
<span class="sd">                switch_id (int): Foreign key for *PhysicalSwitch* relation</span>
<span class="sd">                vsdn_id (int): Foreign key for *Vsdn* relation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_id</span> <span class="o">=</span> <span class="n">physical_switch_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">vsdn_id</span>

<div class="viewcode-block" id="SwitchToVsdn.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.SwitchToVsdn.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="LogicalEdgeEmbedding"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.LogicalEdgeEmbedding">[docs]</a><span class="k">class</span> <span class="nc">LogicalEdgeEmbedding</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM for table *LogicalEdgeEmbedding* in database *HyperFlexTopology*.</span>
<span class="sd">        One object represents a part of a logical link embedding.</span>
<span class="sd">        This class/relation resolves many-to-many relation, since one logical</span>
<span class="sd">        link may consist of multiple physical edges and one physical edge may</span>
<span class="sd">        be part of multiple logical links.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String defining referenced relation in database</span>
<span class="sd">            id: Integer being primary key of relation</span>
<span class="sd">            logical_edge_id: Integer being foreign key of relation *LogicalEdge*.</span>
<span class="sd">                Specifies logical edge record is embedding</span>
<span class="sd">            physical_edge_id: Integer being foreign key of relation *PhysicalEdge*.</span>
<span class="sd">                Specifies physical edge being part of the logical edge embedding</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;LogicalEdgeEmbedding&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">logical_edge_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">physical_edge_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logical_edge_id</span><span class="p">,</span> <span class="n">physical_edge_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes class</span>

<span class="sd">            Args:</span>
<span class="sd">                logical_edge_id (int): Foreign key to relation *LogicalEdge*</span>
<span class="sd">                physical_edge_id (int): Foreign key to relation *PhysicalEdge*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LogicalEdgeEmbedding</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logical_edge_id</span> <span class="o">=</span> <span class="n">logical_edge_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">physical_edge_id</span> <span class="o">=</span> <span class="n">physical_edge_id</span>

<div class="viewcode-block" id="LogicalEdgeEmbedding.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.LogicalEdgeEmbedding.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="PhysicalPort"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalPort">[docs]</a><span class="k">class</span> <span class="nc">PhysicalPort</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM for table *PhysicalPort* belonging to **one** *PhysicalSwitch*.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is referencing</span>
<span class="sd">            id: Integer being primary key of relation</span>
<span class="sd">            switch_id: Integer being foreign key to relation *PhysicalSwitch*</span>
<span class="sd">            number: Integer specifying the order of the port (Port1, Port2, ...)</span>
<span class="sd">            speed: Float specifying the data rate of the port</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;PhysicalPort&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">switch_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Float</span><span class="p">()</span>

<span class="c">#    switch = storm.Reference(switch_id, PhysicalSwitch.id)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes object</span>

<span class="sd">            Args:</span>
<span class="sd">                switch_id (int): Foreign key to relation *PhysicalSwitch*</span>
<span class="sd">                number (int): Number assigned to the port (its order)</span>
<span class="sd">                speed (float, optional): Data rate of the port</span>

<span class="sd">            Note:</span>
<span class="sd">                If speed is not set a random value from the interval [1;1000]</span>
<span class="sd">                is assigned.</span>
<span class="sd">                This behaviour is implemented for the start and will be removed</span>
<span class="sd">                as the project proceeds. Speed of the port will then also become</span>
<span class="sd">                a required argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PhysicalPort</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_id</span> <span class="o">=</span> <span class="n">switch_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
        <span class="k">if</span> <span class="n">speed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">switch_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span>

<div class="viewcode-block" id="PhysicalPort.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalPort.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

</div></div>
<span class="n">network_node_info_types</span> <span class="o">=</span> <span class="p">{}</span>
<span class="sd">&quot;&quot;&quot; Stores mapping number --&gt; class, i.e. for a number representing the</span>
<span class="sd">    info type dictionary gives the class</span>
<span class="sd">&quot;&quot;&quot;</span>

<div class="viewcode-block" id="register_network_node_info_type"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.register_network_node_info_type">[docs]</a><span class="k">def</span> <span class="nf">register_network_node_info_type</span><span class="p">(</span><span class="n">info_type</span><span class="p">,</span> <span class="n">info_class</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Registers a new info class (i.e. a new subclass of *NetworkNode*</span>

<span class="sd">        Args:</span>
<span class="sd">            info_type (int): *&quot;Primary Key&quot;* to reference a subclass of *NetworkNode*</span>
<span class="sd">            info_class (Class): Subclass of *NetworkNode* to be registered</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError if ``info_type`` already exists</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">existing_info_class</span> <span class="o">=</span> <span class="n">network_node_info_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">info_type</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">existing_info_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;{} hast the same info type as {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">info_class</span><span class="p">,</span> <span class="n">existing_info_class</span>
            <span class="p">))</span>
    <span class="n">network_node_info_types</span><span class="p">[</span><span class="n">info_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_class</span>
    <span class="n">info_class</span><span class="o">.</span><span class="n">info_type</span> <span class="o">=</span> <span class="n">info_type</span>

</div>
<div class="viewcode-block" id="NetworkNode"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.NetworkNode">[docs]</a><span class="k">class</span> <span class="nc">NetworkNode</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">,</span> <span class="n">storm</span><span class="o">.</span><span class="n">Storm</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM for relation *NetworkNode*. Implements inheritance for relation</span>
<span class="sd">        databases using *infoheritance* pattern.</span>
<span class="sd">        Base class for various types of network nodes such as switches, hosts,</span>
<span class="sd">        controller or hypervisor</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String defining relation class is referencing</span>
<span class="sd">            id: Integer being primary key of the relation. This is also the</span>
<span class="sd">                primary key for all subclasses of *NetworkNode*</span>
<span class="sd">            name: String being a human readable name of the network node.</span>
<span class="sd">            ip: String being IPv4 Address of the network node</span>
<span class="sd">            info_type: Integer being the identifier with which the subclass was</span>
<span class="sd">                registered.</span>
<span class="sd">            _info: Object being the instance of the subclass specified by</span>
<span class="sd">                *info_type*</span>

<span class="sd">        Note:</span>
<span class="sd">            This implements inheritance of relations. So subclasses of</span>
<span class="sd">            NetworkNode do not directly inherit from this class but rather from</span>
<span class="sd">            class *StoredNetworkNodeInfo* and this class has a reference to it</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;NetworkNode&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">ip</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">info_type</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">_info</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="p">,</span> <span class="n">info_class</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object</span>

<span class="sd">            Args:</span>
<span class="sd">                store (Storm.Store): Connection to database</span>
<span class="sd">                info_class (Class): Subclass of NetworkNode (e.g. PhysicalSwitch)</span>
<span class="sd">                name (String): Human readable name for the network node</span>
<span class="sd">                ip (String): IPv4 address of the node</span>
<span class="sd">                **kwargs (Arguments): Further arguments being passed to constructor</span>
<span class="sd">                    of subclass</span>

<span class="sd">            Example:</span>
<span class="sd">                During initialization constructor of *info_class* is called and</span>
<span class="sd">                **kwargs, additional name-value pairs for the subclass are passed.</span>

<span class="sd">                &gt;&gt;&gt; controller = NetworkNode(</span>
<span class="sd">                ...     store=somestore,</span>
<span class="sd">                ...     info_class=Controller,</span>
<span class="sd">                ...     name=&#39;somename&#39;,</span>
<span class="sd">                ...     ip=&#39;someip&#39;,</span>
<span class="sd">                ...     location=&#39;Controller location&#39;,</span>
<span class="sd">                ...     ip_port=9000</span>
<span class="sd">                ...     )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="n">ip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info_type</span> <span class="o">=</span> <span class="n">info_class</span><span class="o">.</span><span class="n">info_type</span>
        <span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">store</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="n">info_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns object of subclass</span>

<span class="sd">            Returns:</span>
<span class="sd">                Object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="n">info_class</span> <span class="o">=</span> <span class="n">network_node_info_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">info_type</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">info_class</span><span class="p">,</span> <span class="s">&#39;__storm_table__&#39;</span><span class="p">):</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">info_class</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">info_class</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">network_node</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Store</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">info_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="n">info</span>
        <span class="k">return</span> <span class="n">info</span>

<div class="viewcode-block" id="NetworkNode.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.NetworkNode.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes of subclass and NetworkNode as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">to_dictionary</span><span class="p">()</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">)</span> <span class="o">!=</span> <span class="n">Host</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip</span>
        <span class="k">return</span> <span class="n">dic</span>

</div></div>
<div class="viewcode-block" id="NetworkNodeInfo"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.NetworkNodeInfo">[docs]</a><span class="k">class</span> <span class="nc">NetworkNodeInfo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Base class for all classes inheriting from *NetworkNode* relation</span>

<span class="sd">        Attributes:</span>
<span class="sd">            network_node: Object being the parent NetworkNode object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes object</span>

<span class="sd">            Args:</span>
<span class="sd">                network_node (Object): *NetworkNode* object being parent of</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_node</span> <span class="o">=</span> <span class="n">network_node</span>

</div>
<div class="viewcode-block" id="StoredNetworkNodeInfo"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StoredNetworkNodeInfo">[docs]</a><span class="k">class</span> <span class="nc">StoredNetworkNodeInfo</span><span class="p">(</span><span class="n">NetworkNodeInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Comes into action when retrieving/writing from database. Defines a</span>
<span class="sd">        reference between the relation of the subclass and the relation</span>
<span class="sd">        *NetworkNode*</span>

<span class="sd">        Attributes:</span>
<span class="sd">            network_node_id: Integer being primary key of both, *NetworkNode*</span>
<span class="sd">                relation and any relation inheriting from it</span>
<span class="sd">            network_node: Object being the parent of the subclass</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">network_node_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">network_node</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">network_node_id</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PhysicalSwitch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalSwitch">[docs]</a><span class="k">class</span> <span class="nc">PhysicalSwitch</span><span class="p">(</span><span class="n">StoredNetworkNodeInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM for relation *PhysicalSwitch*.</span>

<span class="sd">        Schema *PhysicalSwitch* inherits from schema *NetworkNode*. However in</span>
<span class="sd">        Storm the *infoheritance* pattern is used utilizing wrappers. So this</span>
<span class="sd">        class extends class ``StoredNetworkNodeInfo`` and class ``NetworkNode``</span>
<span class="sd">        representing schema *NetworkNode* has an instance of class</span>
<span class="sd">        ``NetworkNodeInfo`` being in turn a superclass of ``StoredNetworkNodeInfo``.</span>

<span class="sd">        :ref:`infoheritance explanation &lt;infoheritance_desc&gt;`</span>
<span class="sd">        When programmatically creating an instance of ``PhysicalSwitch`` an</span>
<span class="sd">        instance of ``NetworkNode`` has to be created and ``PhysicalSwitch``</span>
<span class="sd">        passed as argument.</span>
<span class="sd">        When the object is then written to the database, Storm takes care of</span>
<span class="sd">        writing everything into the correct schema.</span>
<span class="sd">        **When creating a switch in your code you do not instanciate an object</span>
<span class="sd">        of this class!**</span>

<span class="sd">        In case a switch should be retrieved from the database, ``NetworkNode``</span>
<span class="sd">        is used along with the retrieval methods.</span>
<span class="sd">        Storm resolves the inheritance and returns a ``NetworkNode`` instance</span>
<span class="sd">        with the respective object of type ``PhysicalSwitch`` stored in ``_info``</span>
<span class="sd">        attribute. Note that even though a switch is fetched, type of returned</span>
<span class="sd">        object will be ``NetworkNode``.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; switch = NetworkNode(</span>
<span class="sd">            ...     store=somestore,</span>
<span class="sd">            ...     info_class=PhysicalSwitch,</span>
<span class="sd">            ...     name=&#39;cool_switch&#39;,</span>
<span class="sd">            ...     ip=&#39;192.168.178.2&#39;</span>
<span class="sd">            ...     dpid=&#39;00:00:00:00:00:00:00:10&#39;,</span>
<span class="sd">            ...     cplane=False,</span>
<span class="sd">            ...     ip_port=9100,</span>
<span class="sd">            ...     num_ports=40</span>
<span class="sd">            ...     )</span>
<span class="sd">            &gt;&gt;&gt; somestore.add(switch)</span>
<span class="sd">            &gt;&gt;&gt; somestore.flush()</span>
<span class="sd">            &gt;&gt;&gt; id = switch.id</span>
<span class="sd">            &gt;&gt;&gt; somestore.commit()</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; switch = somestore.get(NetworkNode, id)</span>
<span class="sd">            &gt;&gt;&gt; print switch.ip</span>
<span class="sd">            192.168.178.2</span>
<span class="sd">            &gt;&gt;&gt; print switch.info.name</span>
<span class="sd">            cool_switch</span>
<span class="sd">            &gt;&gt;&gt; print switch.info.dpid</span>
<span class="sd">            00:00:00:00:00:00:00:10</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String defining relation class is mapping to</span>
<span class="sd">            dpid: String representing Data-Path-ID (MAC Address) of switch</span>
<span class="sd">            ip_port: Integer representing port switch is listening for controller</span>
<span class="sd">                connections</span>
<span class="sd">            num_ports: Integer specifying number of ports this switch has</span>
<span class="sd">            c_plane: Boolean specifying whether switch is in control or data plane</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;PhysicalSwitch&#39;</span>
    <span class="n">dpid</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">ip_port</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">num_ports</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">cplane</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Bool</span><span class="p">()</span>

    <span class="n">ports</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">PhysicalPort</span><span class="o">.</span><span class="n">switch_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_node</span><span class="p">,</span> <span class="n">dpid</span><span class="p">,</span> <span class="n">cplane</span><span class="p">,</span> <span class="n">ip_port</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">num_ports</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object. Called by constructor of ``NetworkNode``. Should</span>
<span class="sd">            never be called by user</span>

<span class="sd">            Args:</span>
<span class="sd">                network_node (data.dbinterfaces.NetworkNode): Object of &quot;Parent</span>
<span class="sd">                    class&quot;</span>
<span class="sd">                dpid (String): Data-Path-Id (MAC address)</span>
<span class="sd">                cplane (Boolean): Whether or not switch is located in control</span>
<span class="sd">                    plane</span>
<span class="sd">                ip_port (int, optional): Port switch is listening for controller</span>
<span class="sd">                    connections</span>
<span class="sd">                num_ports (int, optional): Number of ports the switch has</span>

<span class="sd">            Note:</span>
<span class="sd">                If ``ip_port`` is not specified, it defaults to 9000</span>

<span class="sd">            Note:</span>
<span class="sd">                If ``num_ports`` is not specified it defaults to 10</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PhysicalSwitch</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">network_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dpid</span> <span class="o">=</span> <span class="n">dpid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cplane</span> <span class="o">=</span> <span class="n">cplane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip_port</span> <span class="o">=</span> <span class="n">ip_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_ports</span> <span class="o">=</span> <span class="n">num_ports</span>

<div class="viewcode-block" id="PhysicalSwitch.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalSwitch.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;switch&#39;</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;dpid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dpid</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_port</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;num_ports&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_ports</span>
        <span class="n">dic</span><span class="p">[</span><span class="s">&#39;cplane&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cplane</span>
        <span class="k">return</span> <span class="n">dic</span>

</div></div>
<div class="viewcode-block" id="Host"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Host">[docs]</a><span class="k">class</span> <span class="nc">Host</span><span class="p">(</span><span class="n">StoredNetworkNodeInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class representing schema *Host*. Inherits (DB schema) from schema</span>
<span class="sd">        *NetworkNode*</span>

<span class="sd">        For detailed description of how inheritance in the databse schema works</span>
<span class="sd">        refer to :ref: `infoheritance_desc` in class ``PhysicalSwitch``</span>

<span class="sd">        Attributes:</span>
<span class="sd">            vsdn_id: Integer being foreign key to relation *Vsdn* Host belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;Host&#39;</span>
    <span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

<span class="c">#    vsdn = storm.Reference(vsdn_id, Vsdn.id)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_node</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object. Always called by ``NetworkNode``, should never</span>
<span class="sd">            be called by user</span>

<span class="sd">            Attributes:</span>
<span class="sd">                network_node (db.dbinterfaces.NetworkNode): Object of &quot;parent</span>
<span class="sd">                    class&quot;</span>
<span class="sd">                vsdn_id (int): Integer being foreign key to VSDN host belongs to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Host</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">network_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">vsdn_id</span>

<div class="viewcode-block" id="Host.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Host.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;host&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">dic</span>

</div></div>
<div class="viewcode-block" id="Controller"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Controller">[docs]</a><span class="k">class</span> <span class="nc">Controller</span><span class="p">(</span><span class="n">StoredNetworkNodeInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class representing schema *Controller*. Inherits (DB schema) from</span>
<span class="sd">        schema *NetworkNode*</span>

<span class="sd">        For detailed description of how inheritance in the databse schema works</span>
<span class="sd">        refer to :ref: `infoheritance_desc` in class ``PhysicalSwitch``</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is mapping to</span>
<span class="sd">            location: String specifying physical location of controller</span>
<span class="sd">            ip_port: Integer specifying port Controller is listening on</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;Controller&#39;</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">ip_port</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

<span class="c">#    vsdn = storm.Reference(id, Vsdn.controller_id)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_node</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">ip_port</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object. Always called by ``NetworkNode``, should never</span>
<span class="sd">            be called by user</span>

<span class="sd">            Attributes:</span>
<span class="sd">                network_node (db.dbinterfaces.NetworkNode): Object of &quot;parent</span>
<span class="sd">                    class&quot;</span>
<span class="sd">                location (String): Physical location of Controller</span>
<span class="sd">                ip_port (int, optional): Port controller is listening on</span>

<span class="sd">            Note:</span>
<span class="sd">                If ``ip_port`` is not specified it defaults to 9100</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Controller</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">network_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip_port</span> <span class="o">=</span> <span class="n">ip_port</span>

<div class="viewcode-block" id="Controller.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Controller.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns</span>
<span class="sd">                dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;location&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
                <span class="s">&#39;ip_port&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_port</span><span class="p">,</span>
                <span class="s">&#39;type&#39;</span><span class="p">:</span><span class="s">&#39;controller&#39;</span>
                <span class="p">}</span>

</div></div>
<div class="viewcode-block" id="Hypervisor"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Hypervisor">[docs]</a><span class="k">class</span> <span class="nc">Hypervisor</span><span class="p">(</span><span class="n">StoredNetworkNodeInfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class representing schema *Hypervisor*. Inherits (DB schema) from</span>
<span class="sd">        schema *NetworkNode*</span>

<span class="sd">        For detailed description of how inheritance in the databse schema works</span>
<span class="sd">        refer to :ref: `infoheritance_desc` in class ``PhysicalSwitch``</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is mapping to</span>
<span class="sd">            status: String specifying status of hypervisor (running, transition)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;Hypervisor&#39;</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object. Always called by ``NetworkNode``, should never</span>
<span class="sd">            be called by user</span>

<span class="sd">            Attributes:</span>
<span class="sd">                network_node (db.dbinterfaces.NetworkNode): Object of &quot;parent</span>
<span class="sd">                    class&quot;</span>
<span class="sd">                status (String, optional): Status of Hypervisor</span>

<span class="sd">            Note:</span>
<span class="sd">                If ``status`` not specified defaults to RUNNING</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s">&#39;RUNNING&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>

<div class="viewcode-block" id="Hypervisor.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Hypervisor.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;status&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;hypervisor&#39;</span><span class="p">}</span>

</div></div>
<div class="viewcode-block" id="PhysicalEdge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalEdge">[docs]</a><span class="k">class</span> <span class="nc">PhysicalEdge</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class representing schema PhysicalEdge</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation, class is mapping to</span>
<span class="sd">            node_one_id: Integer being foreign key to relation *NetworkNode*</span>
<span class="sd">            node_two_id: Integer being foreign key to relation *NetworkNode*</span>
<span class="sd">            port_one_id: Integer being foreign key to relation *PhysicalPort*.</span>
<span class="sd">            port_two_id: Integer being foreign key to relation *PhysicalPort*</span>
<span class="sd">            port_one: Object of type ``PhysicalPort`` representing port of</span>
<span class="sd">                start/endpoint of edge (if start/end node is switch)</span>
<span class="sd">            port_two: Object of type ``PhysicalPort`` representing port of</span>
<span class="sd">                start/endpoint of edge (if start/end node is switch)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;PhysicalEdge&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">node_one_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">node_two_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">port_one_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">port_two_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

    <span class="n">port_one</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">port_one_id</span><span class="p">,</span> <span class="n">PhysicalPort</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot; This is an example of a one-to-one mapping. When ``PhysicalEdge`` object</span>
<span class="sd">        is created in context of a DB retrieval, Storm will resolve this reference</span>
<span class="sd">        and also load the respective entry from *PhysicalPort*</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">port_two</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">port_two_id</span><span class="p">,</span> <span class="n">PhysicalPort</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_one_id</span><span class="p">,</span> <span class="n">node_two_id</span><span class="p">,</span> <span class="n">port_one_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">port_two_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object</span>

<span class="sd">            Args:</span>
<span class="sd">                node_one_id (int): Primary key of *NetworkNode edge starts/ends</span>
<span class="sd">                node_two_id (int): Primary key of *NetworkNode edge starts/ends</span>
<span class="sd">                port_one_id (int, optional): Primary key of *PhysicalPort* edge</span>
<span class="sd">                    starts/ends. Intended for switches/nodes with multiple ports</span>
<span class="sd">                port_two_id (int, optional): Primary key of *PhysicalPort* edge</span>
<span class="sd">                    starts/ends. Intended for switches/nodes with multiple ports</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PhysicalEdge</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_one_id</span> <span class="o">=</span> <span class="n">node_one_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_two_id</span> <span class="o">=</span> <span class="n">node_two_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port_one_id</span> <span class="o">=</span> <span class="n">port_one_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port_two_id</span> <span class="o">=</span> <span class="n">port_two_id</span>

<div class="viewcode-block" id="PhysicalEdge.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.PhysicalEdge.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="s">&#39;&#39;</span>
        <span class="n">dic</span> <span class="o">=</span>  <span class="p">{</span><span class="s">&#39;from_node&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">node_one_id</span><span class="p">,</span>
                <span class="s">&#39;to_node&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">node_two_id</span><span class="p">,</span>
                <span class="s">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span>
                <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">port_one_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;from_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port_one</span><span class="o">.</span><span class="n">number</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">port_two_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dic</span><span class="p">[</span><span class="s">&#39;to_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port_two</span><span class="o">.</span><span class="n">number</span>
        <span class="k">return</span> <span class="n">dic</span>

</div></div>
<div class="viewcode-block" id="LogicalEdge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.LogicalEdge">[docs]</a><span class="k">class</span> <span class="nc">LogicalEdge</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM mapping class to relation *LogicalEdge*</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is refering to</span>
<span class="sd">            node_one_id: Integer being foreign key for relation *NetworkNode*</span>
<span class="sd">                specifying start/end point of logical link</span>
<span class="sd">            node_two_id: Integer being foreign key for relation *NetworkNode*</span>
<span class="sd">                specifying start/end point of logical link</span>
<span class="sd">            vsdn_id: Integer being foreing key for relation *Vsdn* specifying</span>
<span class="sd">                VSDN logical link belongs to</span>
<span class="sd">            node_one: Reference to the node specified by ``node_one_id``</span>
<span class="sd">            node_two: Reference to the node specified by ``node_two_id``</span>
<span class="sd">            physical_embedding: List of objects of type ``PhysicalEdge``</span>
<span class="sd">                representing the actual edges this logical edge is realized with</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;LogicalEdge&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">node_one_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">node_two_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>

    <span class="n">node_one</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">node_one_id</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">node_two</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">node_two_id</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="c">#    vsdn_id = storm.Reference(vsdn_id, Vsdn.id)</span>

    <span class="n">physical_embedding</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span>
            <span class="nb">id</span><span class="p">,</span>
            <span class="n">LogicalEdgeEmbedding</span><span class="o">.</span><span class="n">logical_edge_id</span><span class="p">,</span>
            <span class="n">LogicalEdgeEmbedding</span><span class="o">.</span><span class="n">physical_edge_id</span><span class="p">,</span>
            <span class="n">PhysicalEdge</span><span class="o">.</span><span class="n">id</span>
            <span class="p">)</span>
    <span class="sd">&quot;&quot;&quot; This is an example of a many-to-one relation. When ``LogicalEdge`` object</span>
<span class="sd">        is fetched from database, Storm will also fetch all records from</span>
<span class="sd">        PhysicalEdge this logical edge is implemented with.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_one_id</span><span class="p">,</span> <span class="n">node_two_id</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes object</span>

<span class="sd">            Args:</span>
<span class="sd">                node_one_id (int): Foreign key to relation *NetworkNode*</span>
<span class="sd">                node_two_id (int): Foreign key to relation *NetworkNode*</span>
<span class="sd">                vsdn_id (int): Foreign key to relation *Vsdn*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LogicalEdge</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_one_id</span> <span class="o">=</span> <span class="n">node_one_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_two_id</span> <span class="o">=</span> <span class="n">node_two_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">vsdn_id</span>

<div class="viewcode-block" id="LogicalEdge.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.LogicalEdge.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s">&#39;from_node&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">node_one</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s">&#39;to_node&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">node_two</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s">&#39;vsdn_id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">vsdn_id</span>
                <span class="p">}</span>

</div></div>
<div class="viewcode-block" id="Vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Vsdn">[docs]</a><span class="k">class</span> <span class="nc">Vsdn</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class mapping to relation *Vsdn*</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is mapping to</span>
<span class="sd">            id: Primary key of relation</span>
<span class="sd">            name: String being human readable name of VSDN</span>
<span class="sd">            tenant_id: Integer being foreign key to relation *Tenant*</span>
<span class="sd">            controller_id: Integer being foreign key to relation *NetworkNode*</span>
<span class="sd">                representing the controller controlling this VSDN</span>
<span class="sd">            color: String specifying a color in HEX-format with which the VSDN</span>
<span class="sd">                will be displayed in the GUI</span>
<span class="sd">            subnet: String specifying subnet mask defining IP-subnet for slice</span>
<span class="sd">            hypervisor_id: Integer being foreign key to relation *NetworkNode*</span>
<span class="sd">                referencing the Hypervisor responsible for this VSDN</span>
<span class="sd">            controller: NetworkNode object representing controller specified by</span>
<span class="sd">                ``controller_id``</span>
<span class="sd">            hypervisor: NetworkNode object representing hypervisor specified by</span>
<span class="sd">                ``hypervisor_id``</span>
<span class="sd">            _hosts: Set of ``Host`` objects being the Hosts belonging to</span>
<span class="sd">                this VSDN</span>
<span class="sd">            logical_edges: Set of ``LogocalEdge`` objects being logical edges</span>
<span class="sd">                defined for this VSDN</span>
<span class="sd">            switches: Set of ``PhysicalSwitch`` objects being the switches</span>
<span class="sd">                serving as physical topology for this VSDN</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;Vsdn&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">tenant_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">controller_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">subnet</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>
    <span class="n">hypervisor_id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">controller_id</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">hypervisor</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">hypervisor_id</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="c">#    tenant = storm.Reference(tenant_id, Tenant.id)</span>

    <span class="n">_hosts</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">Host</span><span class="o">.</span><span class="n">vsdn_id</span><span class="p">)</span>
    <span class="n">logical_edges</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">LogicalEdge</span><span class="o">.</span><span class="n">vsdn_id</span><span class="p">)</span>

    <span class="n">switches</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span>
            <span class="nb">id</span><span class="p">,</span>
            <span class="n">SwitchToVsdn</span><span class="o">.</span><span class="n">vsdn_id</span><span class="p">,</span>
            <span class="n">SwitchToVsdn</span><span class="o">.</span><span class="n">switch_id</span><span class="p">,</span>
            <span class="n">NetworkNode</span><span class="o">.</span><span class="n">id</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">tenant_id</span><span class="p">,</span> <span class="n">controller_id</span><span class="p">,</span> <span class="n">hypervisor_id</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
            <span class="n">subnet</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes object</span>

<span class="sd">            Args:</span>
<span class="sd">                name (String): Name of the VSDN</span>
<span class="sd">                tenant_id (int): Foreign key to relation *Tenant*</span>
<span class="sd">                controller_id (int): Foreign key to relation *NetworkNode*</span>
<span class="sd">                hypervisor_id (int): Foreign key to relation *NetworkNode*</span>
<span class="sd">                color (String, optional): HEX-format color</span>
<span class="sd">                subnet (String, optional): IPv4-subnet mask</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Vsdn</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tenant_id</span> <span class="o">=</span> <span class="n">tenant_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controller_id</span> <span class="o">=</span> <span class="n">controller_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hypervisor_id</span> <span class="o">=</span> <span class="n">hypervisor_id</span>

        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">if</span> <span class="n">subnet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subnet</span> <span class="o">=</span> <span class="n">subnet</span>

<div class="viewcode-block" id="Vsdn.get_hosts"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Vsdn.get_hosts">[docs]</a>    <span class="k">def</span> <span class="nf">get_hosts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the Hosts belonging to this VSDN</span>

<span class="sd">            The Objects in ``_hosts`` are actually of type ``Host``. All</span>
<span class="sd">            information stored in relation ``NetworkNode`` is missing.</span>
<span class="sd">            Therefore this method fetches the entries from *NetworkNode* and</span>
<span class="sd">            returns a set of ``NetworkNode`` objects.</span>

<span class="sd">            Args:</span>
<span class="sd">                store (Storm.Store): Connection to database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="p">[</span><span class="n">NetworkNode</span><span class="o">.</span><span class="n">info_type</span> <span class="o">==</span> <span class="n">config</span><span class="o">.</span><span class="n">get_config_hyperflex_topo</span><span class="p">()[</span><span class="s">&#39;host_info_type&#39;</span><span class="p">]]</span>
                <span class="p">)</span>
</div>
<div class="viewcode-block" id="Vsdn.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Vsdn.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s">&#39;color&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span>
                <span class="p">}</span>

</div></div>
<div class="viewcode-block" id="Tenant"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Tenant">[docs]</a><span class="k">class</span> <span class="nc">Tenant</span><span class="p">(</span><span class="n">IterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; ORM class referencing to relation *Tenant*</span>

<span class="sd">        Attributes:</span>
<span class="sd">            __storm_table__: String specifying relation class is mapping to</span>
<span class="sd">            id: Integer being primary key of relation</span>
<span class="sd">            name: String being name of tenant</span>
<span class="sd">            vsdns: List of ``Vsdn`` objects representing VSDNs belonging to tenant</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__storm_table__</span> <span class="o">=</span> <span class="s">&#39;Tenant&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">primary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Unicode</span><span class="p">()</span>

    <span class="n">vsdns</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">ReferenceSet</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">Vsdn</span><span class="o">.</span><span class="n">tenant_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object</span>

<span class="sd">            Args:</span>
<span class="sd">                name (String): Name of tenant</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Tenant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<div class="viewcode-block" id="Tenant.to_dictionary"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.Tenant.to_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">to_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns class attributes as dictionary</span>

<span class="sd">            Returns:</span>
<span class="sd">                Dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
                <span class="p">}</span>

</div></div>
<div class="viewcode-block" id="StormConnector"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector">[docs]</a><span class="k">class</span> <span class="nc">StormConnector</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; This class establishes the connection to the database using Storm. It does</span>
<span class="sd">        also define sql queries going over a simple get/set.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            config: Dictionary specifying default settings and configuration</span>
<span class="sd">                settings</span>
<span class="sd">            connection: Connection to database</span>
<span class="sd">            store: Representation of database</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initializes Object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_config_hyperflex_topo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">create_database</span><span class="p">(</span>
                <span class="s">&#39;mysql://{uname}:{pwd}@{host}:{port}/{schema}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">uname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;user&#39;</span><span class="p">],</span>
                    <span class="n">pwd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">],</span>
                    <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">],</span>
                    <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;port&#39;</span><span class="p">],</span>
                    <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="n">storm</span><span class="o">.</span><span class="n">Store</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;host_info_type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_node_info_types</span><span class="p">:</span>
            <span class="n">register_network_node_info_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;host_info_type&#39;</span><span class="p">],</span> <span class="n">Host</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;switch_info_type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_node_info_types</span><span class="p">:</span>
            <span class="n">register_network_node_info_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;switch_info_type&#39;</span><span class="p">],</span> <span class="n">PhysicalSwitch</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;controller_info_type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_node_info_types</span><span class="p">:</span>
            <span class="n">register_network_node_info_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;controller_info_type&#39;</span><span class="p">],</span> <span class="n">Controller</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">4</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_node_info_types</span><span class="p">:</span>
            <span class="n">register_network_node_info_type</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">Hypervisor</span><span class="p">)</span>

<div class="viewcode-block" id="StormConnector.__del__"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.__del__">[docs]</a>    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; When object is destroyed clean up ressources</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns store object of connector</span>

<span class="sd">            Returns:</span>
<span class="sd">                Storm.Store</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span>

<div class="viewcode-block" id="StormConnector.get_network_nodes"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.get_network_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">get_network_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info_classes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns network nodes of a specific info class</span>

<span class="sd">            Args:</span>
<span class="sd">                info_class (Class): Any class inheriting from StoredNetworkNodeInfo</span>
<span class="sd">                    and registered</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">where</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">info_classes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">info_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">info_class</span><span class="o">.</span><span class="n">info_type</span> <span class="k">for</span> <span class="n">info_class</span> <span class="ow">in</span> <span class="n">info_classes</span><span class="p">]</span>
            <span class="n">where</span> <span class="o">=</span> <span class="p">[</span><span class="n">NetworkNode</span><span class="o">.</span><span class="n">info_type</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">info_types</span><span class="p">)]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="o">*</span><span class="n">where</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">NetworkNode</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</div>
<div class="viewcode-block" id="StormConnector.get_vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.get_vsdn">[docs]</a>    <span class="k">def</span> <span class="nf">get_vsdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">,</span> <span class="n">tenant_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns VSDN object or Iterator over VSDN objects depending on</span>
<span class="sd">            ``vsdn_id`` and ``tenant_id``.</span>

<span class="sd">            Args:</span>
<span class="sd">                vsdn_id (int): Primary key of VSDN</span>
<span class="sd">                tenant_id (int): Primary key of tenant</span>

<span class="sd">            Note:</span>
<span class="sd">                If ``vsdn_id`` is set method tries to retrieve this VSDN only.</span>
<span class="sd">                If ``vsdn_id`` is not set and ``tenant_id`` is set, all VSDN</span>
<span class="sd">                belonging to this tenant are returned.</span>
<span class="sd">                If neither is set all VSDNs there are are returned (For development</span>
<span class="sd">                purposes, will be removed)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vsdn_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Vsdn</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tenant_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tenant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Tenant</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tenant</span><span class="o">.</span><span class="n">vsdns</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># TODO: Remove eventually</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">Vsdn</span><span class="p">,</span> <span class="n">Vsdn</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.get_physical_topo"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.get_physical_topo">[docs]</a>    <span class="k">def</span> <span class="nf">get_physical_topo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">vsdn_id</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns physical topology (for an VSDN), that is all switches and</span>
<span class="sd">            edges between them</span>

<span class="sd">            Args:</span>
<span class="sd">                vsdn_id (int, optional): Primary key to relation *Vsdn* if set</span>
<span class="sd">                    only switches allocated to this VSDN and edges between them</span>
<span class="sd">                    are returned</span>

<span class="sd">            Returns:</span>
<span class="sd">                switches: List of ``NetworkNode`` objects with info type of</span>
<span class="sd">                    ``PhysicalSwitch``</span>
<span class="sd">                edges: List of ``PhysicalEdge`` objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">where</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">switches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network_nodes</span><span class="p">([</span><span class="n">PhysicalSwitch</span><span class="p">])</span>
        <span class="n">sw_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">switches</span><span class="p">]</span>
        <span class="n">where</span> <span class="o">=</span> <span class="p">[</span><span class="n">PhysicalEdge</span><span class="o">.</span><span class="n">node_one_id</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">sw_ids</span><span class="p">)]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">PhysicalEdge</span><span class="p">,</span> <span class="o">*</span><span class="n">where</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">node_two_id</span> <span class="ow">in</span> <span class="n">sw_ids</span><span class="p">:</span>
                <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">switches</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.get_hypervisor"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.get_hypervisor">[docs]</a>    <span class="k">def</span> <span class="nf">get_hypervisor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns all hypervisor stored in database</span>

<span class="sd">            Returns:</span>
<span class="sd">                hypervisor: List of ``NetworkNode`` objects with info class</span>
<span class="sd">                    ``Hypervisor``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hypervisor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="n">NetworkNode</span><span class="o">.</span><span class="n">info_type</span> <span class="o">==</span> <span class="mi">4</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">hypervisor</span>
</div>
<div class="viewcode-block" id="StormConnector.get_edges_by_node"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.get_edges_by_node">[docs]</a>    <span class="k">def</span> <span class="nf">get_edges_by_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return all edges terminating or oriniating at the node with the</span>
<span class="sd">            given id</span>

<span class="sd">            Args:</span>
<span class="sd">                node_id (int): Primary key to relation *NetworkNode*</span>

<span class="sd">            Returns:</span>
<span class="sd">                set: List of ``PhysicalEdge`` objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">PhysicalEdge</span><span class="p">,</span>
                <span class="n">storm</span><span class="o">.</span><span class="n">Or</span><span class="p">(</span>
                    <span class="n">PhysicalEdge</span><span class="o">.</span><span class="n">port_one_id</span> <span class="o">==</span> <span class="n">node_id</span><span class="p">,</span>
                    <span class="n">PhysicalEdge</span><span class="o">.</span><span class="n">port_two_id</span> <span class="o">==</span> <span class="n">node_id</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="nb">set</span>
</div>
<div class="viewcode-block" id="StormConnector.add_physical_switch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_physical_switch">[docs]</a>    <span class="k">def</span> <span class="nf">add_physical_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">vsdn_ids</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds physical switch to the database and also creates entries for</span>
<span class="sd">            the ports of the switch</span>

<span class="sd">            Args:</span>
<span class="sd">                dictinary (Dictionary): Contains attributes of switch</span>

<span class="sd">            Returns:</span>
<span class="sd">                switch_id: Integer being primary key of newly added switch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#TODO: remove vsdn_ids</span>
        <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">vsdn_ids</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;VSDN primary key not an integer: &#39;</span> <span class="o">+</span>
                    <span class="s">&#39;{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
        <span class="k">if</span> <span class="s">&#39;ip&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;192.168.178.{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">254</span><span class="p">))</span>
        <span class="k">if</span> <span class="s">&#39;dpid&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;dpid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;00:00:00:00:00:00:00:{:02d}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;cplane&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;cplane&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="s">&#39;ip_port&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9100</span>
        <span class="k">if</span> <span class="s">&#39;num_ports&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;num_ports&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="n">switch</span> <span class="o">=</span> <span class="n">NetworkNode</span><span class="p">(</span>
                <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
                <span class="n">info_class</span><span class="o">=</span><span class="n">PhysicalSwitch</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">],</span>
                <span class="n">ip</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">],</span>
                <span class="n">dpid</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;dpid&#39;</span><span class="p">],</span>
                <span class="n">cplane</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;cplane&#39;</span><span class="p">],</span>
                <span class="n">ip_port</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip_port&#39;</span><span class="p">],</span>
                <span class="n">num_ports</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;num_ports&#39;</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">switch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">switch</span><span class="o">.</span><span class="n">id</span>
</div>
<div class="viewcode-block" id="StormConnector.add_physical_port"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_physical_port">[docs]</a>    <span class="k">def</span> <span class="nf">add_physical_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Writes a new physical port to the database</span>

<span class="sd">            Args:</span>
<span class="sd">                dictionary (Dictionary): Key-value pair of attributes of port</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="s">&#39;switch_id&#39;</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">&#39;Switch Id missing. Port not added&#39;</span>
        <span class="k">assert</span> <span class="s">&#39;number&#39;</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">&#39;Port number missing. Port not added&#39;</span>
        <span class="k">assert</span> <span class="s">&#39;speed&#39;</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">,</span> <span class="s">&#39;Speed missing, Port not added&#39;</span>

        <span class="n">port</span> <span class="o">=</span> <span class="n">PhysicalPort</span><span class="p">(</span>
                <span class="n">switch_id</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;switch_id&#39;</span><span class="p">],</span>
                <span class="n">number</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;number&#39;</span><span class="p">],</span>
                <span class="n">speed</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;speed&#39;</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="StormConnector.add_controller"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_controller">[docs]</a>    <span class="k">def</span> <span class="nf">add_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Writes a new controller to the databse and updates (overwrites)</span>
<span class="sd">            the controller set in *Vsdn* relation</span>

<span class="sd">            Args:</span>
<span class="sd">                dictionary (Dictionary): Key-Value pairs of attributes of</span>
<span class="sd">                    controller</span>
<span class="sd">                vsdn_id (int): Primary key of relation *Vsdn* Controller reigns</span>
<span class="sd">                    over</span>

<span class="sd">            Raises:</span>
<span class="sd">                AscertionError: When ``vsdn_id`` is not integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span> <span class="s">&#39;VSDN primary key not an integer: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

        <span class="k">if</span> <span class="s">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;c{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span>

        <span class="k">if</span> <span class="s">&#39;ip&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;192.168.178.{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">254</span><span class="p">))</span>

        <span class="k">if</span> <span class="s">&#39;ip_port&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9000</span>

        <span class="k">if</span> <span class="s">&#39;location&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;Default location&#39;</span>


        <span class="n">ctrl</span> <span class="o">=</span> <span class="n">NetworkNode</span><span class="p">(</span>
                <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
                <span class="n">info_class</span><span class="o">=</span><span class="n">Controller</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">],</span>
                <span class="n">ip</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">],</span>
                <span class="n">location</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">],</span>
                <span class="n">ip_port</span><span class="o">=</span><span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip_port&#39;</span><span class="p">],</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ctrl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">Vsdn</span><span class="p">,</span> <span class="n">Vsdn</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">vsdn_id</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">Vsdn</span><span class="o">.</span><span class="n">controller_id</span> <span class="o">==</span> <span class="n">ctrl</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.add_host"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_host">[docs]</a>    <span class="k">def</span> <span class="nf">add_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Writes a new host to the database.</span>

<span class="sd">            Args:</span>
<span class="sd">                dictionary (Dictionary): Key-Value pairs of attributes of Host</span>
<span class="sd">                vsdn_id (int): Primary key to *Vsdn* relation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span> <span class="s">&#39;VSDN primary key not an integer: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span>
        <span class="c"># def __init__(self, info_class, name, ip, vsdn_id):</span>

        <span class="k">if</span> <span class="s">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;h{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span>

        <span class="k">if</span> <span class="s">&#39;ip&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;192.168.178.{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">254</span><span class="p">))</span>

        <span class="n">host</span> <span class="o">=</span> <span class="n">NetworkNode</span><span class="p">(</span>
                <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
                <span class="n">info_class</span> <span class="o">=</span> <span class="n">Host</span><span class="p">,</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">],</span>
                <span class="n">ip</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">],</span>
                <span class="n">vsdn_id</span> <span class="o">=</span> <span class="n">vsdn_id</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.add_server"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_server">[docs]</a>    <span class="k">def</span> <span class="nf">add_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.add_physical_edge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_physical_edge">[docs]</a>    <span class="k">def</span> <span class="nf">add_physical_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.add_logical_edge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_logical_edge">[docs]</a>    <span class="k">def</span> <span class="nf">add_logical_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Writes a new logical link to the database (writing embedding happens</span>
<span class="sd">            separately)</span>

<span class="sd">            Args:</span>
<span class="sd">                dictionary (Dictionary): Key-Value pairs of attributes</span>
<span class="sd">                vsdn_id (int): Primary key to relation *Vsdn*</span>

<span class="sd">            Raises:</span>
<span class="sd">                AssertsionError: vsdn_id is not an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span> <span class="s">&#39;VSDN primary key not an integer: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vsdn_id</span><span class="p">)</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="n">NetworkNode</span><span class="o">.</span><span class="n">info_type</span><span class="o">==</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span>

        <span class="n">node2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="n">NetworkNode</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;to_node&#39;</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="n">node1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="n">NetworkNode</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">dictionary</span><span class="p">[</span><span class="s">&#39;from_node&#39;</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="n">node1</span> <span class="o">=</span> <span class="n">node1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">node2</span> <span class="o">=</span> <span class="n">node2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">le</span> <span class="o">=</span> <span class="n">LogicalEdge</span><span class="p">(</span>
                <span class="n">node_one_id</span><span class="o">=</span><span class="n">node1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">node_two_id</span><span class="o">=</span><span class="n">node2</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">vsdn_id</span><span class="o">=</span><span class="n">vsdn_id</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">le</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="StormConnector.add_logical_link_embedding"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.add_logical_link_embedding">[docs]</a>    <span class="k">def</span> <span class="nf">add_logical_link_embedding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_controller"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_controller">[docs]</a>    <span class="k">def</span> <span class="nf">remove_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller_id</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  Removes controller instance from database and also deletes entry</span>
<span class="sd">            from *Vsdn* relation.</span>

<span class="sd">            Args:</span>
<span class="sd">                conroller_id (int): Primary key to *NetworkNode* relation</span>
<span class="sd">                vsdn_id (int): Primary key to *Vsdn* relation</span>

<span class="sd">            Raises:</span>
<span class="sd">                AssertionError: ``controller_id`` or ``vsdn_id`` not integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span><span class="p">(</span>
                <span class="nb">type</span><span class="p">(</span><span class="n">controller_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s">&#39;controller_id is not an integer : {}. host could not be removed&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">controller_id</span>
                    <span class="p">)</span>

                <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">controller</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="n">controller_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">Vsdn</span><span class="p">,</span> <span class="n">Vsdn</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">vsdn_id</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">controller_id</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">controller</span><span class="p">)</span>
            <span class="n">ctrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Controller</span><span class="p">,</span> <span class="n">controller_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ctrl</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s">&#39;Error in dbinterfaces.StromConnector.remove_controller &#39;</span> <span class="o">+</span>
                    <span class="s">&#39;during removal of controller with id {} &#39;</span> <span class="o">+</span>
                    <span class="s">&#39;Error was: &quot;{}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">controller_id</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_host"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_host">[docs]</a>    <span class="k">def</span> <span class="nf">remove_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes host from database</span>

<span class="sd">            Args:</span>
<span class="sd">                host_id (int): Primary Key to relation *NetworkNode*</span>

<span class="sd">            Raises:</span>
<span class="sd">                AssertionError: ``host_id`` not an integer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span><span class="p">(</span>
                <span class="nb">type</span><span class="p">(</span><span class="n">host_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s">&#39;host_id is not an integer: {}. host could not be removed&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">host_id</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="n">host_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
            <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Host</span><span class="p">,</span> <span class="n">host_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">host</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s">&#39;Error in dbinterfaces.StormConnector.remove_host &#39;</span> <span class="o">+</span>
                    <span class="s">&#39;during removal of host with id {} &#39;</span> <span class="o">+</span>
                    <span class="s">&#39;Error was &quot;{}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">host_id</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_logical_edge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_logical_edge">[docs]</a>    <span class="k">def</span> <span class="nf">remove_logical_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes an logical edge from database and also removes the</span>
<span class="sd">            accompanying physical embedding</span>

<span class="sd">            Args:</span>
<span class="sd">                from_node (String): Name (label) of first node</span>
<span class="sd">                to_node (String): Name (label) of second node</span>

<span class="sd">            Raises:</span>
<span class="sd">                RuntimeError: Occurrence of error during transaction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="n">NetworkNode</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">to_node</span>
                <span class="p">)</span>
        <span class="n">node1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">NetworkNode</span><span class="p">,</span>
                <span class="n">NetworkNode</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">from_node</span>
                <span class="p">)</span>

        <span class="n">node1</span> <span class="o">=</span> <span class="n">node1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">node2</span> <span class="o">=</span> <span class="n">node2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                <span class="n">LogicalEdge</span><span class="p">,</span>
                <span class="n">LogicalEdge</span><span class="o">.</span><span class="n">node_one_id</span> <span class="o">==</span> <span class="n">node1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">LogicalEdge</span><span class="o">.</span><span class="n">node_two_id</span> <span class="o">==</span> <span class="n">node2</span><span class="o">.</span><span class="n">id</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                    <span class="n">LogicalEdge</span><span class="p">,</span>
                    <span class="n">LogicalEdge</span><span class="o">.</span><span class="n">node_one_id</span> <span class="o">==</span> <span class="n">node2</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">LogicalEdge</span><span class="o">.</span><span class="n">node_two_id</span> <span class="o">==</span> <span class="n">node1</span><span class="o">.</span><span class="n">id</span>
                    <span class="p">)</span>

        <span class="k">if</span> <span class="n">edge</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;Error in data.dbinterfaces.StormConnector.&#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;remove_logical_edge: No logical edge found start point &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;{} and end point {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">elif</span> <span class="n">edge</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;Error in data.dbinterfaces.StormConnector.&#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;remove_logical_edge: More than one edge with starting &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;point {} and end point {} found&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">edge</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_logical_edge_embedding"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_logical_edge_embedding">[docs]</a>    <span class="k">def</span> <span class="nf">remove_logical_edge_embedding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embedding_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_physical_edge"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_physical_edge">[docs]</a>    <span class="k">def</span> <span class="nf">remove_physical_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_physical_port"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_physical_port">[docs]</a>    <span class="k">def</span> <span class="nf">remove_physical_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_physical_switch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_physical_switch">[docs]</a>    <span class="k">def</span> <span class="nf">remove_physical_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes switch and ports belonging to that switch</span>

<span class="sd">            Args:</span>
<span class="sd">                switch_id (int): Primary key of relation *PhysicalSwitch*</span>

<span class="sd">            Raises:</span>
<span class="sd">                AssertionError: ``switch_id`` not numeric</span>
<span class="sd">                RuntimeError: Error during transaction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span><span class="p">(</span>
                <span class="nb">type</span><span class="p">(</span><span class="n">switch_id</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s">&#39;switch_id is not an integer: {}. Switch could not be removed&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">switch_id</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">switches_to_vsdns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
                    <span class="n">SwitchToVsdn</span><span class="p">,</span>
                    <span class="n">SwitchToVsdn</span><span class="o">.</span><span class="n">switch_id</span> <span class="o">==</span> <span class="n">switch_id</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;Error in data.dbinterfaces.StormConnector.&#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;.remove_physical_switch : Error while attempting to remove &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;Switch to VSDN mapping during removal of switch with &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;id {}. Error message was {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">PhysicalPort</span><span class="p">,</span> <span class="n">PhysicalPort</span><span class="o">.</span><span class="n">switch_id</span> <span class="o">==</span> <span class="n">switch_id</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&#39;Error in data.dbinterfaces.StormConnector.&#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;remove_physical_switch: Error occured while removing &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;Ports belonging to switch with &#39;</span> <span class="o">+</span> \
                    <span class="s">&#39;id {}. Error message was {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NetworkNode</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">switch</span><span class="p">)</span>
        <span class="n">switch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">PhysicalSwitch</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">switch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">switch</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_server"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_server">[docs]</a>    <span class="k">def</span> <span class="nf">remove_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_switch_to_vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_switch_to_vsdn">[docs]</a>    <span class="k">def</span> <span class="nf">remove_switch_to_vsdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_tenant"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_tenant">[docs]</a>    <span class="k">def</span> <span class="nf">remove_tenant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tenant_id</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="StormConnector.remove_vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.StormConnector.remove_vsdn">[docs]</a>    <span class="k">def</span> <span class="nf">remove_vsdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vsdn_id</span><span class="p">):</span>
        <span class="k">pass</span>

</div></div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector">[docs]</a><span class="k">class</span> <span class="nc">HyperFlexTopoSimpleConnector</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Interface to manage schema `HyperFlexTopoSimple`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_config_hyperflex_topo_simple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span> <span class="o">=</span> <span class="n">msdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;ip&#39;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;user&#39;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.put_link"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.put_link">[docs]</a>    <span class="k">def</span> <span class="nf">put_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a new link into table `Link` of `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                attributes (Dictionary): Attribute-Value pairs of new record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;INSERT INTO &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span> <span class="o">+</span>
                <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_link&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span>
            <span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;cols&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;values&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span>
                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">rec</span><span class="p">:</span>
                        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">+</span>  <span class="n">e</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;),&quot;</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;) &quot;</span> <span class="o">+</span> <span class="n">values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_insert</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.put_network_node"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.put_network_node">[docs]</a>    <span class="k">def</span> <span class="nf">put_network_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a new link into table `network_node` of `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                attributes (Dictionary): Attribute-Value pairs of new record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;INSERT INTO &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span> <span class="o">+</span>
                <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_network_node&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span>
            <span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;cols&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;values&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span>
                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">rec</span><span class="p">:</span>
                        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">+</span>  <span class="n">e</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;),&quot;</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;) &quot;</span> <span class="o">+</span> <span class="n">values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_insert</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.put_switch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.put_switch">[docs]</a>    <span class="k">def</span> <span class="nf">put_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a new link into table `switch` of `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                attributes (Dictionary): Attribute-Value pairs of new record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;INSERT INTO &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span> <span class="o">+</span>
                <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_switch&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span>
            <span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;cols&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;values&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span>
                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">rec</span><span class="p">:</span>
                        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">+</span>  <span class="n">e</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;),&quot;</span>


        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;) &quot;</span> <span class="o">+</span> <span class="n">values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_insert</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.put_vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.put_vsdn">[docs]</a>    <span class="k">def</span> <span class="nf">put_vsdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a new link into table `vsdn` of `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                attributes (Dictionary): Attribute-Value pairs of new record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;INSERT INTO &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span> <span class="o">+</span>
                <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_vsdn&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;(&quot;</span>
            <span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;cols&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s">&#39;values&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span>
                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">rec</span><span class="p">:</span>
                        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">+</span>  <span class="n">e</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;),&quot;</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;) &quot;</span> <span class="o">+</span> <span class="n">values</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_insert</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.remove_link"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.remove_link">[docs]</a>    <span class="k">def</span> <span class="nf">remove_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes entries of table `link` in schema `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs hedging</span>
<span class="sd">                    delete command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;DELETE FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_link&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="n">restriction</span> <span class="o">=</span> <span class="s">&quot;WHERE&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
                <span class="n">restriction</span> <span class="o">=</span> <span class="n">restriction</span> <span class="o">+</span> <span class="s">&quot; (&quot;</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="n">restriction</span> <span class="o">=</span> <span class="n">restriction</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot; = &quot;</span> <span class="o">+</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; AND &quot;</span>
                <span class="n">restriction</span> <span class="o">=</span> <span class="n">restriction</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">restriction</span><span class="p">)</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)]</span> <span class="o">+</span> <span class="s">&quot;) OR &quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">restriction</span> <span class="o">=</span> <span class="n">resctriction</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; OR &quot;</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">restriction</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">restriction</span><span class="p">)</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.remove_network_node"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.remove_network_node">[docs]</a>    <span class="k">def</span> <span class="nf">remove_network_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes entries of table `NetworkNode` in schema `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs hedging</span>
<span class="sd">                    delete command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;DELETE FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_network_node&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="n">restriction</span> <span class="o">=</span> <span class="s">&quot;WHERE&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">restriction</span> <span class="o">=</span> <span class="n">resctriction</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; OR &quot;</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">restriction</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">restriction</span><span class="p">)</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.remove_switch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.remove_switch">[docs]</a>    <span class="k">def</span> <span class="nf">remove_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes entries of table `Switch` in schema `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs hedging</span>
<span class="sd">                    delete command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;DELETE FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_switch&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="n">restriction</span> <span class="o">=</span> <span class="s">&quot;WHERE&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">restriction</span> <span class="o">=</span> <span class="n">resctriction</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; OR &quot;</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">restriction</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">restriction</span><span class="p">)</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.remove_vsdn"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.remove_vsdn">[docs]</a>    <span class="k">def</span> <span class="nf">remove_vsdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes entries of table `Vsdn` in schema `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs hedging</span>
<span class="sd">                    delete command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&quot;DELETE FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_vsdn&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="n">restriction</span> <span class="o">=</span> <span class="s">&quot;WHERE&quot;</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">restriction</span> <span class="o">=</span> <span class="n">resctriction</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; AND &quot;</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">restriction</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">restriction</span><span class="p">)</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.get_link"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.get_link">[docs]</a>    <span class="k">def</span> <span class="nf">get_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Performs select statement on table &#39;Host&#39; in schema</span>
<span class="sd">            `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                columns (List): contains columns to select. If `None` all</span>
<span class="sd">                    columns are selected</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs to narrow</span>
<span class="sd">                    down selection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s">&#39;SELECT &#39;</span>
        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_link&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">where</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; WHERE &quot;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;{}={} AND &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_select</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.get_network_node"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.get_network_node">[docs]</a>    <span class="k">def</span> <span class="nf">get_network_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Performs select statement on table &#39;Host&#39; in schema</span>
<span class="sd">            `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                columns (List): contains columns to select. If `None` all</span>
<span class="sd">                    columns are selected</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs to narrow</span>
<span class="sd">                    down selection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s">&#39;SELECT &#39;</span>
        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="s">&quot;{}`{}`,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_network_node&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">where</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; WHERE &quot;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;{}={} AND &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_select</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HyperFlexTopoSimpleConnector.get_switch"><a class="viewcode-back" href="../../data.html#data.dbinterfaces.HyperFlexTopoSimpleConnector.get_switch">[docs]</a>    <span class="k">def</span> <span class="nf">get_switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">where</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Performs select statement on table &#39;Host&#39; in schema</span>
<span class="sd">            `HyperFlexTopoSimple`</span>

<span class="sd">            Args:</span>
<span class="sd">                columns (List): contains columns to select. If `None` all</span>
<span class="sd">                    columns are selected</span>
<span class="sd">                where (Dictionary): containing attribute-value pairs to narrow</span>
<span class="sd">                    down selection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s">&#39;SELECT &#39;</span>
        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="s">&quot;,&quot;</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; FROM &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;schema_name&#39;</span><span class="p">]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">[</span><span class="s">&#39;tbl_switch&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">where</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot; WHERE &quot;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">where</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span> <span class="o">+</span> <span class="s">&quot;{}={} AND &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">where</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span><span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execute_select</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_execute_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Executes update/delete/insert statements</span>

<span class="sd">            Args:</span>
<span class="sd">                command (String): SQL statement to be executed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&#39;Error while executing sql statement. Performa rollback&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_execute_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Performs a select statement</span>

<span class="sd">            Args:</span>
<span class="sd">                command (String): Select statement to be executed</span>

<span class="sd">            Returns:</span>
<span class="sd">                results (List): List of Dictionaries with col --&gt; val mapping</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db_handle</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">MySQLdb</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span><span class="p">)</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="k">print</span> <span class="n">results</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Failed to execute select statement&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>
</pre></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Patrick Kalmbach.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>